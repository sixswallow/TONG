# é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—å¿«é€Ÿå‚è€ƒ

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆ5åˆ†é’Ÿç‰ˆï¼‰

### 1. æ³¨å†Œè´¦å·
- è®¿é—®ï¼šhttps://www.aliyun.com
- æ³¨å†Œè´¦å·å¹¶å®Œæˆå®åè®¤è¯

### 2. å¼€é€šæœåŠ¡
- æœç´¢"å‡½æ•°è®¡ç®—"
- ç‚¹å‡»"ç«‹å³å¼€é€š"
- é€‰æ‹©åœ°åŸŸï¼ˆæ¨èï¼šåä¸œ1-æ­å·ï¼‰

### 3. åˆ›å»ºå‡½æ•°
```
æœåŠ¡åç§°ï¼šhydrological-service
å‡½æ•°åç§°ï¼šfetch-hydrological-data
è¿è¡Œæ—¶ï¼šNode.js 14 æˆ– Node.js 16
å†…å­˜ï¼š128 MB
è¶…æ—¶ï¼š10 ç§’
```

### 4. ä¸Šä¼ ä»£ç 
å¤åˆ¶ `aliyun-function/index.js` çš„å†…å®¹åˆ°åœ¨çº¿ç¼–è¾‘å™¨ï¼Œç‚¹å‡»"ä¿å­˜å¹¶éƒ¨ç½²"

### 5. åˆ›å»ºHTTPè§¦å‘å™¨
```
è§¦å‘å™¨ç±»å‹ï¼šHTTPè§¦å‘å™¨
è¯·æ±‚æ–¹å¼ï¼šGETã€POST
è®¤è¯æ–¹å¼ï¼šanonymous
```

### 6. è·å–URL
å¤åˆ¶å…¬ç½‘è®¿é—®åœ°å€ï¼Œæ ¼å¼ç±»ä¼¼ï¼š
```
https://1234567890123456.cn-hangzhou.fc.aliyuncs.com/2016-08-15/proxy/hydrological-service/fetch-hydrological-data/
```

### 7. é…ç½®å°ç¨‹åº
ä¿®æ”¹ `app.js`ï¼š
```javascript
PROXY_URL: "https://1234567890123456.cn-hangzhou.fc.aliyuncs.com/2016-08-15/proxy/hydrological-service/fetch-hydrological-data/"
```

### 8. é…ç½®åŸŸå
åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°æ·»åŠ ï¼š
```
*.fc.aliyuncs.com
```

### 9. æµ‹è¯•
é‡æ–°ç¼–è¯‘å°ç¨‹åºï¼ŒæŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—

---

## ğŸ“‹ å®Œæ•´ä»£ç 

### index.jsï¼ˆé˜¿é‡Œäº‘å‡½æ•°ï¼‰
```javascript
const request = require('request-promise');

exports.handler = async (event, context) => {
  const { code, dateBegin, dateEnd } = event;
  
  const apiUrl = `http://www.hnswkcj.com/wxhn/data/rthyinfo/rsvr/proc/one.json?code=${code}&dateBegin=${dateBegin}&dateEnd=${dateEnd}`;
  
  try {
    const result = await request({
      uri: apiUrl,
      json: true,
      timeout: 10000
    });
    
    return {
      statusCode: 200,
      body: JSON.stringify(result),
      headers: {
        'Content-Type': 'application/json'
      }
    };
  } catch (error) {
    return {
      statusCode: 500,
      body: JSON.stringify({ error: error.message })
    };
  }
};
```

### package.jsonï¼ˆå¦‚æœä½¿ç”¨ZIPä¸Šä¼ ï¼‰
```json
{
  "name": "hydrological-function",
  "version": "1.0.0",
  "description": "Fetch hydrological data",
  "main": "index.js",
  "dependencies": {
    "request-promise": "^4.2.6"
  }
}
```

---

## ğŸ”§ å…³é”®é…ç½®

### å‡½æ•°é…ç½®
| é…ç½®é¡¹ | å€¼ |
|--------|-----|
| è¿è¡Œæ—¶ | Node.js 14/16 |
| å†…å­˜ | 128 MB |
| è¶…æ—¶ | 10 ç§’ |
| å®ä¾‹å¹¶å‘åº¦ | 1 |

### è§¦å‘å™¨é…ç½®
| é…ç½®é¡¹ | å€¼ |
|--------|-----|
| ç±»å‹ | HTTPè§¦å‘å™¨ |
| è¯·æ±‚æ–¹å¼ | GETã€POST |
| è®¤è¯æ–¹å¼ | anonymous |
| è¯·æ±‚è·¯å¾„ | / |

---

## ğŸ’° è´¹ç”¨è¯´æ˜

### å…è´¹é¢åº¦
- æ¯æœˆ100ä¸‡æ¬¡è°ƒç”¨
- æ¯æœˆ400,000 CU-ç§’
- æ¯æœˆ1 GBå…¬ç½‘å‡ºæµé‡

### è®¡è´¹æ ‡å‡†ï¼ˆè¶…å‡ºå…è´¹é¢åº¦åï¼‰
- è°ƒç”¨æ¬¡æ•°ï¼šÂ¥1.33/ç™¾ä¸‡æ¬¡
- æ‰§è¡Œæ—¶é—´ï¼šÂ¥0.00003167/GB-ç§’
- å…¬ç½‘å‡ºæµé‡ï¼šÂ¥0.50/GB

**ä¼°ç®—**ï¼šå½“å‰ä½¿ç”¨å®Œå…¨åœ¨å…è´¹é¢åº¦å†…

---

## â“ å¸¸è§é—®é¢˜é€ŸæŸ¥

### Q1: å°ç¨‹åºæŠ¥"åŸŸåä¸åœ¨åˆ—è¡¨ä¸­"
**A**: åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°æ·»åŠ  `*.fc.aliyuncs.com` åˆ°requeståˆæ³•åŸŸå

### Q2: å‡½æ•°è°ƒç”¨è¶…æ—¶
**A**: å¢åŠ è¶…æ—¶æ—¶é—´åˆ°15-20ç§’ï¼Œæˆ–æ£€æŸ¥ç›®æ ‡APIæ˜¯å¦æ­£å¸¸

### Q3: è¿”å›æ•°æ®æ ¼å¼é”™è¯¯
**A**: æŸ¥çœ‹å‡½æ•°æ—¥å¿—ï¼Œç¡®è®¤ç›®æ ‡APIè¿”å›æ ¼å¼

### Q4: ä¾èµ–åŒ…æ‰¾ä¸åˆ°
**A**: ä½¿ç”¨åœ¨çº¿ç¼–è¾‘æ–¹å¼ï¼Œæˆ–ç¡®ä¿ZIPåŒ…åŒ…å«node_modules

### Q5: å¦‚ä½•æŸ¥çœ‹æ—¥å¿—
**A**: å‡½æ•°è¯¦æƒ…é¡µ â†’ æ—¥å¿—æŸ¥è¯¢ â†’ é€‰æ‹©æ—¶é—´èŒƒå›´

---

## ğŸ“Š ç›‘æ§åœ°å€

### æ§åˆ¶å°åœ°å€
- å‡½æ•°è®¡ç®—ï¼šhttps://fc.console.aliyun.com
- æ—¥å¿—æœåŠ¡ï¼šhttps://sls.console.aliyun.com

### é‡è¦é“¾æ¥
- å®˜æ–¹æ–‡æ¡£ï¼šhttps://help.aliyun.com/product/50980.html
- ä»·æ ¼è¯´æ˜ï¼šhttps://www.aliyun.com/price/product#/fc/detail

---

## ğŸ¯ æ£€æŸ¥æ¸…å•

éƒ¨ç½²å‰æ£€æŸ¥ï¼š
- [ ] å·²æ³¨å†Œé˜¿é‡Œäº‘è´¦å·
- [ ] å·²å®Œæˆå®åè®¤è¯
- [ ] å·²å¼€é€šå‡½æ•°è®¡ç®—æœåŠ¡
- [ ] å·²å‡†å¤‡å¥½ä»£ç æ–‡ä»¶

éƒ¨ç½²åæ£€æŸ¥ï¼š
- [ ] å‡½æ•°åˆ›å»ºæˆåŠŸ
- [ ] HTTPè§¦å‘å™¨åˆ›å»ºæˆåŠŸ
- [ ] æµ‹è¯•å‡½æ•°æ‰§è¡ŒæˆåŠŸ
- [ ] å·²å¤åˆ¶è®¿é—®åœ°å€
- [ ] å·²é…ç½®å°ç¨‹åºPROXY_URL
- [ ] å·²é…ç½®å¾®ä¿¡å…¬ä¼—å¹³å°åŸŸå
- [ ] å°ç¨‹åºæµ‹è¯•é€šè¿‡

---

## ğŸ“ è·å–å¸®åŠ©

- å®˜æ–¹æ–‡æ¡£ï¼šhttps://help.aliyun.com/product/50980.html
- æŠ€æœ¯æ”¯æŒï¼šé˜¿é‡Œäº‘æ§åˆ¶å° â†’ å·¥å•ç³»ç»Ÿ
- ç¤¾åŒºè®ºå›ï¼šhttps://developer.aliyun.com

---

**æç¤º**ï¼šè¯¦ç»†æ­¥éª¤è¯·æŸ¥çœ‹ [é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—è¯¦ç»†éƒ¨ç½²æŒ‡å—.md](file:///c:\Users\12426\Documents\Trea\TONG-main\weixin-app\é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—è¯¦ç»†éƒ¨ç½²æŒ‡å—.md)
